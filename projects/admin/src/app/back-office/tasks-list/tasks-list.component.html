<div class="container-fluid py-4">
  <div class="row">
    <form [formGroup]="searchForm">
      <div class="d-flex align-items-center mb-3">
        <!-- <div class="col-lg-3">
          <div class="form-group mb-0 mr-20">
            <ng-select formControlName="employeeId" [items]="employeeMasterList" class="" bindLabel="userName"
              bindValue="_id" placeholder="Select Employee">
            </ng-select>

          </div>
        </div> -->
        <div class="col-lg-3 mr-20">
          <span class="icon-position"><i class="fa fa-search"></i></span>
          <input type="text" class="searchTerm form-control" (input)="search($event.target.value)"
            [ngModelOptions]="{standalone: true}" [(ngModel)]="searchTerm" placeholder="Type here...">
        </div>
        <div class="col-lg-3 mr-20">
          <div class="form-group mb-0 position-relative mat-date-picker" (click)="reportFromDate.open()">
            <span class="icon-position cursor-pointer"><i class="fa fa-calendar"></i></span>
            <input matInput class="form-control" (dateChange)="onReportFromDateChange($event)"
              placeholder="Please Select From Date" [matDatepicker]="reportFromDate" formControlName="reportFromDate">
            <div class="mat-dat-picker-icon">
              <div class="calendar-icon"><i class="bx bxs-calendar"></i></div>
              <mat-datepicker-toggle matSuffix [for]="reportFromDate">
              </mat-datepicker-toggle>
              <mat-datepicker #reportFromDate></mat-datepicker>
            </div>
            <!-- <span class="icon-position cursor-pointer" (click)="reportFromDate.toggle()"><i
                class="fa fa-calendar"></i></span>
            <input class="form-control" (dateSelect)="onReportFromDateChange($event)"
              (input)="onReportFromDateChange($event)" (click)="reportFromDate.toggle()"
              formControlName="reportFromDate" placeholder="From Date (YYYY-MM-DD)" name="dp"
              #reportFromDate="ngbDatepicker" ngbDatepicker>
            <div *ngIf="fromDateShowValidation">
              <span class="error_msg">From Date is Required.</span>
            </div> -->
          </div>
        </div>
        <div class="col-lg-3">
          <div class="form-group mb-0 position-relative mat-date-picker" (click)="reportToDate.open()">
            <span class="icon-position cursor-pointer"><i class="fa fa-calendar"></i></span>
            <input matInput class="form-control" [min]="this.searchForm.value.reportFromDate"
              placeholder="Please Select To Date" [matDatepicker]="reportToDate" formControlName="reportToDate">
            <div class="mat-dat-picker-icon">
              <div class="calendar-icon"><i class="bx bxs-calendar"></i></div>
              <mat-datepicker-toggle matSuffix [for]="reportToDate">
              </mat-datepicker-toggle>
              <mat-datepicker #reportToDate></mat-datepicker>
            </div>
            <!-- <div class="form-group mb-0">
            <span class="icon-position cursor-pointer" (click)="reportToDate.toggle()"><i
                class="fa fa-calendar"></i></span>
            <input class="form-control" (input)="onReportToDateChange($event)" (click)="reportToDate.toggle()"
              (dateSelect)="onReportToDateChange($event)" formControlName="reportToDate"
              placeholder="To Date (YYYY-MM-DD)" name="dp" #reportToDate="ngbDatepicker" ngbDatepicker>
            <div *ngIf="submitterSearchFormData === true">
              <span class="error_msg">Please Enter Valid Date.</span>
            </div> -->
          </div>
        </div>
        <!-- <div class="col-lg-6">
          <div class="mb-4">
            <a class="btn bg-gradient-dark mb-0 add-btn" (click)='getTasksList()'><i class="fas fa-search"
                aria-hidden="true"></i>&nbsp;&nbsp;Search</a>
          </div>
        </div> -->
      </div>
    </form>
  </div>
  <div class="row">
    <!-- <div class="col-lg-5">
      <div class="card">
        <div class="card-body">
          <div class="tableFixHead">
            <table class="w-100">
              <thead>
                <tr>
                  <th class="p-2">No.</th>
                  <th class="p-2">Employee Name</th>
                  <th class="p-2">&nbsp;</th>
                </tr>
              </thead>
              <tbody>
                <tr [ngClass]="employeeMasterIndex === EmployeeIndex ? 'active' : '' "
                  *ngFor="let employeeMasterData of employeeMasterList | filter : searchTerm ;let employeeMasterIndex = index"
                  (click)="getTaskListByEmployeeId(employeeMasterData._id,employeeMasterIndex)">
                  <td style="text-align: center; border-top-left-radius:20px; border-bottom-left-radius:20px;"
                    class="p-2 cursor-pointer">{{employeeMasterIndex + 1}}</td>
                  <td class="p-2 cursor-pointer">{{employeeMasterData.userName | titlecase}}</td>
                  <td style="border-top-right-radius:20px; border-bottom-right-radius:20px;"
                    class="p-2 cursor-pointer text-center w-5">
                    <i class="fa fa-angle-right mr-10"></i>
                  </td>
                </tr>
                <tr *ngIf="noData">
                  <td colspan="3">
                    <h2 class="text-center mb-0">Data Not Found</h2>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div> -->

    <div class="col-lg-5">
      <div class="card">
        <div class="card-body">

          <div style="height:450px; overflow:auto;" class="tableFixHead">

            <!-- <table>
              <thead>
                <tr>
                  <th class="p-2">No.</th>
                  <th class="p-2">Employee Name</th>
                  <th class="p-2"></th>
                </tr>
              </thead>
              <tbody>
                <tr [ngClass]="employeeMasterIndex === EmployeeIndex ? 'active' : '' "
                *ngFor="let employeeMasterData of employeeMasterList | filter : searchTerm ;let employeeMasterIndex = index"
                (click)="getTaskListByEmployeeId(employeeMasterData._id,employeeMasterIndex)">
                  <th>{{employeeMasterIndex + 1}}</th>
                  <th>{{employeeMasterData.userName | titlecase}}</th>
                  <th><i class="fa fa-angle-right mr-10"></i></th>
                </tr>
              </tbody>
            </table> -->

            <div class="d-flex task-list-header">
              <h6 class="w-15 m-0 ml-2">No</h6>
              <h6 class="w-75 m-0">Emolyee name</h6>
              <p class="w-10 m-0">&nbsp;</p>
            </div>
            <div>
              <div [ngClass]="employeeMasterIndex === EmployeeIndex ? 'active' : '' "
                *ngFor="let employeeMasterData of employeeMasterList | filter : searchTerm ;let employeeMasterIndex = index"
                (click)="getTaskListByEmployeeId(employeeMasterData.employeeId,employeeMasterIndex)"
                style="display:flex;">
                <p style="padding-left: 15px !important; text-align:left; border-top-left-radius:20px; border-bottom-left-radius:20px;"
                  class="p-2 cursor-pointer w-15 m-0"><span style="margin-left:10px ;">{{employeeMasterIndex +
                    1}}</span></p>
                <p class="w-80 m-0 p-2">{{employeeMasterData.userName | titlecase}}</p>
                <p style="border-top-right-radius:20px; border-bottom-right-radius:20px;"
                  class="p-2 cursor-pointer text-center w-10 m-0"><i class="fa fa-angle-right mr-10"></i></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="col-lg-7">
      <div class="card" *ngIf="showTaskCard === true">
        <div class="card-body">
          <div class="row">
            <div class="col-lg-12">
              <button class="mr-20 task-detail-close-btn cursor-pointer btn bg-gradient-dark cancel-btn"
                (click)="closeTaskReport()"
                style="float: right;margin-right:10px;border-radius: 50%;padding: 6px 10px;">
                <i class="fa fa-times" style="font-size: 10px;"></i>
              </button>
              <button *ngIf="taskMasterList.workReportData.length > 0"
                class="mr-20 task-detail-close-btn cursor-pointer btn bg-gradient-dark cancel-btn" title="Download"
                style="float: right;margin-right:10px;border-radius: 50%;padding: 6px 10px;" (click)="downloadExcel()">
                <i class="fa fa-download" style="font-size: 10px;"></i>
              </button>
              <div class="mb-2">
                <h2>Employee Task Details</h2>
              </div>

              <div class="d-flex align-items-center mb-3">
                <div>
                  <img src="{{imgURL}}{{taskMasterList.profile_image}}"
                    onerror="this.src ='../assets/img/no-image-available.jpg'" class="task-details-employee-img">
                </div>
                <div class="ms-4" style="word-break: break-word;">
                  <h5 class="m-0"> {{taskMasterList.firstName | titlecase}} {{taskMasterList.middleName | titlecase}}
                    {{taskMasterList.lastName | titlecase}}</h5>
                  <p class="m-0">{{taskMasterList.designationName | titlecase}}</p>
                </div>
              </div>
              <div *ngIf="taskMasterList.workReportData" class="work-report-loop">
                <div class="loop-class"
                  *ngFor="let workReportData of taskMasterList.workReportData | sortDesc : 'reportDate';let rowIndex = index">
                  <div class="d-flex">
                    <h6 class="col-lg-2">Report Date: </h6>
                    <p class="ps-3 col-lg-10">{{workReportData.reportDate | date:'MMM d,yyyy'}}</p>
                  </div>

                  <div class="d-flex">
                    <h6 class="col-lg-2">Times: </h6>
                    <p class="ps-3 col-lg-10">{{workReportData.taskHour +' Hours '+ workReportData.taskMinutes + '
                      Minutes'}}</p>
                  </div>

                  <div class="d-flex">
                    <h6 class="col-lg-2">Project Name: </h6>
                    <p class="ps-3 col-lg-10">{{workReportData.projectName}}</p>
                  </div>

                  <div class="d-flex">
                    <h6 class="col-lg-2">Daily Task: </h6>
                    <p class="ps-3 col-lg-10">
                      {{workReportData.task}}
                    </p>
                  </div>
                  <div class="d-flex">
                    <h6 class="col-lg-2">Status: </h6>
                    <p class="ps-3 col-lg-10" *ngIf="workReportData.taskstatus == 1">Hold</p>
                    <p class="ps-3 col-lg-10" *ngIf="workReportData.taskstatus == 2">In Progress</p>
                    <p class="ps-3 col-lg-10" *ngIf="workReportData.taskstatus == 3">Complete</p>
                  </div>
                  <hr *ngIf="rowIndex+1 != taskMasterList.workReportData.length">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="task-list-details-logo" *ngIf="showTaskCard === false">
        <img src="../../../assets/img/Asset 2.png">
      </div>
    </div>
  </div>
</div>